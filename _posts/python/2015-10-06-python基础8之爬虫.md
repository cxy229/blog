---
layout     : post
title      : python基础8之爬虫
categories : python
tags       : [notes]
---
# links

#### 基础 urllib requests selenium BeautifulSoup
* [Python爬虫学习系列教程|静觅 http://cuiqingcai.com/1052.html](http://cuiqingcai.com/1052.html)

* [Selenium Python Bindings http://selenium-python.readthedocs.org/installation.html](http://selenium-python.readthedocs.org/installation.html)

* [黑板客爬虫教程 http://www.heibanke.com/2015/08/13/python_crawler_learn/](http://www.heibanke.com/2015/08/13/python_crawler_learn/)

#### scrapy
* [Scrapy爬虫抓取网站数据 | ShinChan's Blog http://chenqx.github.io/2014/11/09/Scrapy-Tutorial-for-BBSSpider/](http://chenqx.github.io/2014/11/09/Scrapy-Tutorial-for-BBSSpider/)

* [Scrapy中文文档 http://scrapy-chs.readthedocs.org/zh_CN/latest/index.html](http://scrapy-chs.readthedocs.org/zh_CN/latest/index.html)

# 闯关游戏

## 第一关
[http://www.heibanke.com/lesson/crawler_ex00/](http://www.heibanke.com/lesson/crawler_ex00/)

```python
#!/usr/bin/env python3
#-*- coding:utf-8 -*-

from bs4 import BeautifulSoup
import re
import urllib
count = 0 #经过的网页个数
def findAnswer(url,num):
    global count
    if num == None:
        return count
    count = count + 1
    html = urllib.request.urlopen(url+num)  #打开url
    soup = BeautifulSoup(html)  #解析html
    h3_list = soup.find_all('h3')   #find_all <h3>
    if len(h3_list)==1:
        print(h3_list[0].text)
        if re.search(r'\d+',h3_list[0].text):
            num = re.search(r'\d+',h3_list[0].text).group(0)
            print(num)
        else:
            num = None
        return findAnswer(url,num)    #递归
    else:
        print('h3_list:',h3_list)
print(findAnswer('http://www.heibanke.com/lesson/crawler_ex00/','22213'))
```

![result](http://img.blog.csdn.net/20151026213803803)

## 第二关
[http://www.heibanke.com/lesson/crawler_ex01/](http://www.heibanke.com/lesson/crawler_ex01/)

```python
# -*- encoding:utf-8 -*-
#!/usr/bin/env python3

import requests
url = "http://www.heibanke.com/lesson/crawler_ex01/"

for i in range(0,31):
    params = {'username':'heibanke','password':str(i)}
    r = requests.post(url,params)
    if '密码错误' in r.text:
        print('密码：'+str(i)+'错误')
    else:
        print (r.text)
        print('密码：'+str(i)+'正确')
        break
```

![res](http://img.blog.csdn.net/20151026224651960)
